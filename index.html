<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quanto voc√™ precisa para parar de trabalhar?</title>
  <style>
    :root{
      --bg1:#070A12;
      --bg2:#0B1630;
      --card:#0E1B35cc;
      --stroke:#ffffff14;
      --text:#EAF0FF;
      --muted:#B8C2E0;
      --accent:#7C5CFF;
      --accent2:#20E3B2;
      --danger:#FF4D6D;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(124,92,255,.25), transparent 50%),
        radial-gradient(900px 500px at 80% 20%, rgba(32,227,178,.18), transparent 55%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px 16px;
    }

    .wrap{
      width:min(980px, 100%);
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:18px;
    }

    @media (max-width: 900px){
      .wrap{grid-template-columns: 1fr;}
    }

    .panel{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }

    .header{ padding:22px 22px 10px; }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 12px;
      border:1px solid var(--stroke);
      border-radius: 999px;
      color: var(--muted);
      font-size: 13px;
      background: rgba(255,255,255,.04);
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 0 18px rgba(124,92,255,.55);
    }

    h1{
      margin:14px 0 8px;
      font-size: clamp(26px, 3.2vw, 40px);
      line-height:1.15;
      letter-spacing: -0.02em;
    }

    .sub{
      margin:0;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.55;
      max-width: 62ch;
    }

    .content{ padding: 12px 22px 22px; }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 600px){
      .grid{grid-template-columns:1fr;}
    }

    label{
      display:block;
      font-size: 13px;
      color: var(--muted);
      margin: 10px 0 6px;
    }

    .field{ position:relative; }

    input{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: var(--text);
      outline:none;
      font-size: 15px;
    }
    input:focus{
      border-color: rgba(124,92,255,.55);
      box-shadow: 0 0 0 4px rgba(124,92,255,.14);
    }

    .hint{
      margin-top:6px;
      font-size: 12px;
      color: rgba(184,194,224,.8);
    }

    .actions{
      display:flex;
      gap:10px;
      margin-top:16px;
      flex-wrap:wrap;
    }
    button{
      cursor:pointer;
      border:none;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 800;
      font-size: 14px;
      color: #0B0E18;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 12px 30px rgba(124,92,255,.22);
      transition: transform .12s ease, filter .12s ease;
    }
    button:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    button:active{ transform: translateY(0px); filter: brightness(.98); }
    button[disabled]{ opacity:.6; cursor:not-allowed; transform:none; }

    .ghost{
      background: rgba(255,255,255,.06);
      color: var(--text);
      border: 1px solid var(--stroke);
      box-shadow:none;
    }

    .results{
      padding: 18px 22px 22px;
      border-top: 1px solid var(--stroke);
    }

    .kpi{ display:grid; gap:10px; }

    .card{
      background: rgba(255,255,255,.04);
      border: 1px solid var(--stroke);
      border-radius: 16px;
      padding: 14px 14px;
    }

    .kpi .title{
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 6px;
    }

    .kpi .value{
      font-size: 20px;
      font-weight: 900;
      letter-spacing: -0.01em;
    }

    .kpi .small{
      margin-top:6px;
      color: rgba(184,194,224,.85);
      font-size: 12px;
      line-height: 1.45;
    }

    .side{ display:flex; flex-direction:column; gap:18px; }

    .note{
      padding: 18px 18px;
      color: rgba(184,194,224,.92);
      font-size: 13px;
      line-height: 1.55;
    }

    .warn{
      border-left: 4px solid rgba(255,77,109,.75);
      padding-left: 12px;
    }

    .ok{
      border-left: 4px solid rgba(32,227,178,.6);
      padding-left: 12px;
    }

    .footer{
      margin-top:10px;
      color: rgba(184,194,224,.72);
      font-size: 12px;
    }

    .hr{ height:1px; background: var(--stroke); margin: 12px 0 0; }

    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color: rgba(234,240,255,.8);
    }

    .shareTip{
      margin-top:10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: rgba(234,240,255,.88);
      font-size: 13px;
      line-height: 1.45;
    }

    /* Canvas do card (fica invis√≠vel) */
    canvas{ display:none; }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- LEFT -->
    <section class="panel">
      <div class="header">
        <div class="badge"><span class="dot"></span> Simulador simples de acumula√ß√£o patrimonial</div>
        <h1>QUANTO VOC√ä PRECISA PARA PARAR DE TRABALHAR?</h1>
        <p class="sub">
          Preenche, gera, compartilha. E depois me marca ‚Äî eu adoro ver gente saindo do ‚Äúum dia eu come√ßo‚Äù.
        </p>
      </div>

      <div class="content">
        <div class="grid">
          <div class="field">
            <label for="idade">Idade atual</label>
            <input id="idade" type="number" min="0" max="120" value="30" />
            <div class="hint">Ex.: 30</div>
          </div>

          <div class="field">
            <label for="anos">Per√≠odo de aplica√ß√£o (anos)</label>
            <input id="anos" type="number" min="0" max="80" value="20" />
            <div class="hint">Ex.: 20</div>
          </div>

          <div class="field">
            <label for="capital">Capital inicial (R$)</label>
            <input id="capital" type="number" min="0" step="100" value="10000" />
            <div class="hint">Ex.: 10000</div>
          </div>

          <div class="field">
            <label for="aporte">Aporte mensal (R$)</label>
            <input id="aporte" type="number" min="0" step="50" value="1000" />
            <div class="hint">Ex.: 1000</div>
          </div>

          <div class="field">
            <label for="retorno">Taxa de retorno anual (%)</label>
            <input id="retorno" type="number" min="0" step="0.1" value="10" />
            <div class="hint">Ex.: 10</div>
          </div>

          <div class="field">
            <label for="inflacao">Infla√ß√£o anual (%)</label>
            <input id="inflacao" type="number" min="0" step="0.01" value="4.75" />
            <div class="hint">Meta de longo prazo (Bacen): 4,75%</div>
          </div>
        </div>

        <div class="actions">
          <button id="btn">Gerar relat√≥rio</button>
          <button id="share" class="ghost" type="button" disabled>Compartilhar resultado</button>
          <button id="reset" class="ghost" type="button">Reset</button>
        </div>

        <div class="footer">
          Dica: retorno √© estimativa. O tempo √© certeiro.
        </div>
      </div>

      <div class="results" id="results" style="display:none;">
        <div class="kpi">
          <div class="card">
            <div class="title">Seu patrim√¥nio em <span id="out_anos"></span> anos</div>
            <div class="value" id="out_patrimonio">‚Äî</div>
            <div class="small" id="out_contexto">‚Äî</div>
          </div>

          <div class="card">
            <div class="title">Voc√™ alcan√ßa o primeiro milh√£o em</div>
            <div class="value" id="out_milhao">‚Äî</div>
            <div class="small" id="out_milhao_detalhe">‚Äî</div>
          </div>

          <div class="card">
            <div class="title">Renda passiva mensal aproximada (0,5% ao m√™s)</div>
            <div class="value" id="out_renda">‚Äî</div>
            <div class="small">Regra simples: <span class="mono">renda ‚âà 0,005 √ó patrim√¥nio</span></div>
          </div>
        </div>

        <div class="shareTip" id="shareTip" style="display:none;">
          ‚úÖ Card gerado! Posta nos stories e marca <strong>@henri.wealthplanner</strong> ‚Äî eu vou repostar.
        </div>

        <div class="hr"></div>

        <div class="note warn" style="margin-top:14px;">
          <strong>Disclaimer:</strong>
          este simulador <strong>n√£o considera imposto de renda</strong>, taxas, mudan√ßas de aloca√ß√£o,
          per√≠odos de rentabilidade negativa, nem o <strong>crescimento real dos aportes</strong>.
          A inten√ß√£o aqui √© <strong>educa√ß√£o financeira</strong> e uma vis√£o pr√°tica de ‚Äúordem de grandeza‚Äù:
          pra voc√™ ter no√ß√£o do quanto precisa <strong>se organizar, manter consist√™ncia e dar tempo ao tempo</strong>
          para construir a vida que quer viver ‚Äî sem depender de sorte ou milagre.
        </div>
      </div>

      <canvas id="cardCanvas" width="1080" height="1920"></canvas>
    </section>

    <!-- RIGHT -->
    <aside class="panel side">
      <div class="header">
        <div class="badge"><span class="dot"></span> Como este c√°lculo pensa</div>
        <h2 style="margin:14px 0 8px; font-size: 20px;">O b√°sico bem feito.</h2>
        <p class="sub" style="font-size: 14px;">
          Capital inicial + aportes mensais, juros compostos mensais. Tamb√©m mostra ‚Äúreais de hoje‚Äù pela infla√ß√£o.
        </p>
      </div>

      <div class="content">
        <div class="card ok">
          <div class="title">Como usar no Instagram</div>
          <div class="small">
            1) Gere o relat√≥rio<br/>
            2) Clique em <strong>Compartilhar resultado</strong><br/>
            3) Poste nos stories e marque <strong>@henri.wealthplanner</strong> üòâ
          </div>
        </div>

        <div class="card">
          <div class="title">Observa√ß√£o</div>
          <div class="small">
            Isso √© uma r√©gua simples. Se voc√™ quiser, depois eu te ajudo a criar uma vers√£o com
            ‚Äúmeta de renda‚Äù e ‚Äútaxa segura de retirada‚Äù mais conservadora.
          </div>
        </div>

        <div class="footer">
          Quer deixar com seu branding? Eu adapto as cores e coloco seu @ em destaque no card.
        </div>
      </div>
    </aside>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const brl = new Intl.NumberFormat('pt-BR', { style:'currency', currency:'BRL' });

    function clamp(n, min, max){ return Math.min(Math.max(n, min), max); }

    function toMonthlyRate(annualPct){
      const a = annualPct / 100;
      return Math.pow(1 + a, 1/12) - 1;
    }

    function addYearsToDate(date, years){
      const d = new Date(date.getTime());
      d.setFullYear(d.getFullYear() + years);
      return d;
    }

    function formatDateBR(date){
      return date.toLocaleDateString('pt-BR', { year:'numeric', month:'long', day:'2-digit' });
    }

    function simulate({ years, initial, monthlyContribution, annualReturnPct }){
      const months = Math.round(years * 12);
      const r = toMonthlyRate(annualReturnPct);

      let p = initial;
      for(let i=0; i<months; i++){
        p = p * (1 + r) + monthlyContribution;
      }
      return p;
    }

    function monthsToReachTarget({ initial, monthlyContribution, annualReturnPct, target, maxYears=120 }){
      const r = toMonthlyRate(annualReturnPct);
      const maxMonths = Math.round(maxYears * 12);

      let p = initial;
      for(let m=0; m<=maxMonths; m++){
        if(p >= target) return m;
        p = p * (1 + r) + monthlyContribution;
      }
      return null;
    }

    function pvByInflation(fv, annualInflationPct, years){
      const i = annualInflationPct / 100;
      return fv / Math.pow(1 + i, years);
    }

    function readInputs(){
      const idade = Number($("idade").value);
      const anos = Number($("anos").value);
      const capital = Number($("capital").value);
      const aporte = Number($("aporte").value);
      const retorno = Number($("retorno").value);
      const inflacao = Number($("inflacao").value);

      return {
        idade: isFinite(idade) ? clamp(idade, 0, 120) : 0,
        anos: isFinite(anos) ? clamp(anos, 0, 80) : 0,
        capital: isFinite(capital) ? Math.max(0, capital) : 0,
        aporte: isFinite(aporte) ? Math.max(0, aporte) : 0,
        retorno: isFinite(retorno) ? Math.max(0, retorno) : 0,
        inflacao: isFinite(inflacao) ? Math.max(0, inflacao) : 0,
      };
    }

    // Guardar √∫ltimos resultados pra compartilhar
    let last = null;

    function render(){
      const { idade, anos, capital, aporte, retorno, inflacao } = readInputs();

      const fv = simulate({ years: anos, initial: capital, monthlyContribution: aporte, annualReturnPct: retorno });
      const pv = pvByInflation(fv, inflacao, anos);

      const hoje = new Date();
      const futuro = addYearsToDate(hoje, anos);
      const idadeFutura = idade + anos;

      const alvo = 1_000_000;
      const months = monthsToReachTarget({ initial: capital, monthlyContribution: aporte, annualReturnPct: retorno, target: alvo });

      let milhaoTxt = "", milhaoDetalhe = "";
      if(months === null){
        milhaoTxt = "N√£o alcan√ßa";
        milhaoDetalhe = "Com esses par√¢metros, o patrim√¥nio n√£o cruza R$ 1.000.000 no horizonte simulado.";
      } else {
        const yearsToM = months / 12;
        const yearsInt = Math.floor(yearsToM);
        const remMonths = Math.round((yearsToM - yearsInt) * 12);

        if (months === 0) milhaoTxt = "Agora (j√° est√° acima)";
        else if (yearsInt === 0) milhaoTxt = `${months} meses`;
        else milhaoTxt = `${yearsInt} ano(s) e ${remMonths} m√™s(es)`;

        const dateM = new Date();
        dateM.setMonth(dateM.getMonth() + months);
        const idadeM = idade + Math.floor(months / 12);

        milhaoDetalhe = `Estimativa de data: ${formatDateBR(dateM)} (por volta de ${idadeM} anos).`;
      }

      const renda = fv * 0.005;

      $("out_anos").textContent = anos;
      $("out_patrimonio").textContent = brl.format(fv);
      $("out_contexto").innerHTML =
        `Na data <strong>${formatDateBR(futuro)}</strong>, voc√™ ter√° <strong>${idadeFutura} anos</strong>.<br/>` +
        `Em ‚Äúreais de hoje‚Äù (ajustado pela infla√ß√£o), isso equivale a <strong>${brl.format(pv)}</strong>.`;

      $("out_milhao").textContent = milhaoTxt;
      $("out_milhao_detalhe").textContent = milhaoDetalhe;
      $("out_renda").textContent = brl.format(renda);

      $("results").style.display = "block";
      $("share").disabled = false;
      $("shareTip").style.display = "none";

      last = {
        idade, anos, capital, aporte, retorno, inflacao,
        fv, pv, renda,
        futuro, idadeFutura,
        milhaoTxt, milhaoDetalhe
      };

      $("results").scrollIntoView({ behavior: "smooth", block: "start" });
    }

    function downloadBlob(blob, filename){
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    // Desenha um card em canvas (1080x1920)
    function buildShareCard(){
      if(!last) return;

      const c = $("cardCanvas");
      const ctx = c.getContext("2d");

      // helpers
      const roundRect = (x,y,w,h,r) => {
        const rr = Math.min(r, w/2, h/2);
        ctx.beginPath();
        ctx.moveTo(x+rr, y);
        ctx.arcTo(x+w, y, x+w, y+h, rr);
        ctx.arcTo(x+w, y+h, x, y+h, rr);
        ctx.arcTo(x, y+h, x, y, rr);
        ctx.arcTo(x, y, x+w, y, rr);
        ctx.closePath();
      };

      // background gradient
      const g = ctx.createLinearGradient(0,0,1080,1920);
      g.addColorStop(0, "#070A12");
      g.addColorStop(1, "#0B1630");
      ctx.fillStyle = g;
      ctx.fillRect(0,0,1080,1920);

      // glow blobs
      const rg1 = ctx.createRadialGradient(180,240,0,180,240,520);
      rg1.addColorStop(0, "rgba(124,92,255,.28)");
      rg1.addColorStop(1, "rgba(124,92,255,0)");
      ctx.fillStyle = rg1; ctx.fillRect(0,0,1080,1920);

      const rg2 = ctx.createRadialGradient(900,320,0,900,320,520);
      rg2.addColorStop(0, "rgba(32,227,178,.18)");
      rg2.addColorStop(1, "rgba(32,227,178,0)");
      ctx.fillStyle = rg2; ctx.fillRect(0,0,1080,1920);

      // main card
      const cardX = 70, cardY = 210, cardW = 940, cardH = 1420;
      ctx.fillStyle = "rgba(255,255,255,.05)";
      ctx.strokeStyle = "rgba(255,255,255,.10)";
      ctx.lineWidth = 2;
      roundRect(cardX, cardY, cardW, cardH, 28);
      ctx.fill(); ctx.stroke();

      // header text
      ctx.fillStyle = "rgba(234,240,255,.95)";
      ctx.font = "900 54px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText("QUANTO VOC√ä PRECISA", cardX+50, cardY+120);
      ctx.fillText("PARA PARAR DE TRABALHAR?", cardX+50, cardY+182);

      // subtitle
      ctx.fillStyle = "rgba(184,194,224,.95)";
      ctx.font = "500 28px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText(`Simula√ß√£o em ${last.anos} ano(s) ‚Ä¢ Retorno ${last.retorno}% a.a. ‚Ä¢ Infla√ß√£o ${last.inflacao}% a.a.`, cardX+50, cardY+235);

      // divider
      ctx.strokeStyle = "rgba(255,255,255,.12)";
      ctx.beginPath();
      ctx.moveTo(cardX+50, cardY+280);
      ctx.lineTo(cardX+cardW-50, cardY+280);
      ctx.stroke();

      // KPI blocks
      const block = (y, title, value, small) => {
        const bx = cardX+50, by = y, bw = cardW-100, bh = 250;
        ctx.fillStyle = "rgba(255,255,255,.04)";
        ctx.strokeStyle = "rgba(255,255,255,.10)";
        roundRect(bx, by, bw, bh, 22);
        ctx.fill(); ctx.stroke();

        ctx.fillStyle = "rgba(184,194,224,.95)";
        ctx.font = "700 26px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText(title, bx+26, by+62);

        ctx.fillStyle = "rgba(234,240,255,.98)";
        ctx.font = "900 60px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText(value, bx+26, by+140);

        ctx.fillStyle = "rgba(184,194,224,.92)";
        ctx.font = "500 26px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";

        // quebra de linha simples pro small
        const maxW = bw - 52;
        const words = String(small).split(" ");
        let line = "", yy = by+195;
        for(const w of words){
          const test = line ? line + " " + w : w;
          if(ctx.measureText(test).width > maxW){
            ctx.fillText(line, bx+26, yy);
            line = w;
            yy += 34;
          } else line = test;
        }
        if(line) ctx.fillText(line, bx+26, yy);
      };

      const futuroTxt = `${formatDateBR(last.futuro)} ‚Ä¢ ${last.idadeFutura} anos`;
      block(cardY+330, `Seu patrim√¥nio em ${last.anos} ano(s)`, brl.format(last.fv), `Nessa data: ${futuroTxt}. Em ‚Äúreais de hoje‚Äù: ${brl.format(last.pv)}.`);

      block(cardY+620, "Primeiro milh√£o", last.milhaoTxt, last.milhaoDetalhe);

      block(cardY+910, "Renda passiva mensal (0,5%)", brl.format(last.renda), "Regra simples (did√°tica): renda ‚âà 0,5% do patrim√¥nio ao m√™s.");

      // footer / CTA
      ctx.fillStyle = "rgba(234,240,255,.95)";
      ctx.font = "900 34px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText("Posta nos stories e marca:", cardX+50, cardY+1265);

      // handle
      const handle = "@henri.wealthplanner";
      // grad text effect (fake): draw twice
      ctx.fillStyle = "rgba(32,227,178,.95)";
      ctx.font = "900 48px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText(handle, cardX+50, cardY+1330);

      ctx.fillStyle = "rgba(184,194,224,.90)";
      ctx.font = "500 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText("Eu vou repostar üëä", cardX+50, cardY+1375);

      ctx.fillStyle = "rgba(184,194,224,.78)";
      ctx.font = "500 20px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText("Disclaimer: n√£o considera IR, taxas, nem crescimento real dos aportes. Conte√∫do educativo.", cardX+50, cardY+1425);

      // export
      c.toBlob((blob) => {
        if(!blob) return;
        const filename = `resultado_parar_de_trabalhar_${Date.now()}.png`;
        downloadBlob(blob, filename);
        $("shareTip").style.display = "block";
        $("shareTip").scrollIntoView({ behavior: "smooth", block: "nearest" });
      }, "image/png");
    }

    $("btn").addEventListener("click", render);

    $("share").addEventListener("click", () => {
      // garante que tem resultado
      if(!last){
        render();
      }
      buildShareCard();
    });

    $("reset").addEventListener("click", () => {
      $("idade").value = 30;
      $("anos").value = 20;
      $("capital").value = 10000;
      $("aporte").value = 1000;
      $("retorno").value = 10;
      $("inflacao").value = 4.75;

      $("results").style.display = "none";
      $("share").disabled = true;
      $("shareTip").style.display = "none";
      last = null;
    });
  </script>
</body>
</html>
