<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quanto voc√™ precisa para parar de trabalhar?</title>
  <style>
    :root{
      --bg1:#070A12;
      --bg2:#0B1630;
      --card:#0E1B35cc;
      --stroke:#ffffff14;
      --text:#EAF0FF;
      --muted:#B8C2E0;
      --accent:#7C5CFF;
      --accent2:#20E3B2;
      --danger:#FF4D6D;
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px;
    }

    *{ box-sizing:border-box }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(124,92,255,.25), transparent 50%),
        radial-gradient(900px 500px at 80% 20%, rgba(32,227,178,.18), transparent 55%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px 16px;
    }

    .wrap{
      width:min(980px, 100%);
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:18px;
    }
    @media (max-width: 900px){
      .wrap{ grid-template-columns: 1fr; }
    }

    .panel{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }

    .header{ padding:22px 22px 10px; }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 12px;
      border:1px solid var(--stroke);
      border-radius: 999px;
      color: var(--muted);
      font-size: 13px;
      background: rgba(255,255,255,.04);
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 0 18px rgba(124,92,255,.55);
    }

    h1{
      margin:14px 0 8px;
      font-size: clamp(26px, 3.2vw, 40px);
      line-height:1.15;
      letter-spacing: -0.02em;
    }

    .sub{
      margin:0;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.55;
      max-width: 62ch;
    }

    .content{ padding: 12px 22px 22px; }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 600px){
      .grid{ grid-template-columns: 1fr; }
    }

    label{
      display:block;
      font-size: 13px;
      color: var(--muted);
      margin: 10px 0 6px;
    }

    input{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: var(--text);
      outline:none;
      font-size: 15px;
    }
    input:focus{
      border-color: rgba(124,92,255,.55);
      box-shadow: 0 0 0 4px rgba(124,92,255,.14);
    }

    .hint{
      margin-top:6px;
      font-size: 12px;
      color: rgba(184,194,224,.8);
    }

    .actions{
      display:flex;
      gap:10px;
      margin-top:16px;
      flex-wrap:wrap;
    }
    button{
      cursor:pointer;
      border:none;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 800;
      font-size: 14px;
      color: #0B0E18;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 12px 30px rgba(124,92,255,.22);
      transition: transform .12s ease, filter .12s ease;
    }
    button:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    button:active{ transform: translateY(0px); filter: brightness(.98); }
    button[disabled]{ opacity:.6; cursor:not-allowed; transform:none; }

    .ghost{
      background: rgba(255,255,255,.06);
      color: var(--text);
      border: 1px solid var(--stroke);
      box-shadow:none;
    }

    .results{
      padding: 18px 22px 22px;
      border-top: 1px solid var(--stroke);
      display:none;
    }

    .kpi{ display:grid; gap:10px; }

    .card{
      background: rgba(255,255,255,.04);
      border: 1px solid var(--stroke);
      border-radius: 16px;
      padding: 14px 14px;
    }

    .title{
      color: var(--muted);
      font-size: 12px;
      margin-bottom: 6px;
    }
    .value{
      font-size: 20px;
      font-weight: 900;
      letter-spacing: -0.01em;
    }
    .small{
      margin-top:6px;
      color: rgba(184,194,224,.85);
      font-size: 12px;
      line-height: 1.45;
    }

    .hr{ height:1px; background: var(--stroke); margin: 14px 0 0; }

    .note{
      margin-top:14px;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: rgba(184,194,224,.92);
      font-size: 13px;
      line-height: 1.55;
      border-left: 4px solid rgba(255,77,109,.75);
    }

    .shareTip{
      margin-top:10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: rgba(234,240,255,.88);
      font-size: 13px;
      line-height: 1.45;
      display:none;
    }

    .side{
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    .footer{
      margin-top:10px;
      color: rgba(184,194,224,.72);
      font-size: 12px;
    }

    canvas{ display:none; }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- LEFT -->
    <section class="panel">
      <div class="header">
        <div class="badge"><span class="dot"></span> Simulador simples de acumula√ß√£o patrimonial</div>
        <h1>QUANTO VOC√ä PRECISA PARA PARAR DE TRABALHAR?</h1>
        <p class="sub">
          Preenche, gera, compartilha. Depois marca <strong>@henri.wealthplanner</strong> ‚Äî eu vou repostar.
        </p>
      </div>

      <div class="content">
        <div class="grid">
          <div>
            <label for="idade">Idade atual</label>
            <input id="idade" type="number" min="0" max="120" value="30" />
            <div class="hint">Ex.: 30</div>
          </div>

          <div>
            <label for="anos">Per√≠odo de aplica√ß√£o (anos)</label>
            <input id="anos" type="number" min="0" max="80" value="20" />
            <div class="hint">Ex.: 20</div>
          </div>

          <div>
            <label for="capital">Capital inicial (R$)</label>
            <input id="capital" type="number" min="0" step="100" value="10000" />
            <div class="hint">Ex.: 10000</div>
          </div>

          <div>
            <label for="aporte">Aporte mensal (R$)</label>
            <input id="aporte" type="number" min="0" step="50" value="1000" />
            <div class="hint">Ex.: 1000</div>
          </div>

          <div>
            <label for="retorno">Taxa de retorno anual (%)</label>
            <input id="retorno" type="number" min="0" step="0.1" value="10" />
            <div class="hint">Ex.: 10</div>
          </div>

          <div>
            <label for="inflacao">Infla√ß√£o anual (%)</label>
            <input id="inflacao" type="number" min="0" step="0.01" value="4.75" />
            <div class="hint">Meta de longo prazo (Bacen): 4,75%</div>
          </div>
        </div>

        <div class="actions">
          <button id="btn">Gerar relat√≥rio</button>
          <button id="share" class="ghost" type="button" disabled>Compartilhar resultado</button>
          <button id="reset" class="ghost" type="button">Reset</button>
        </div>

        <div class="footer">Dica: retorno √© estimativa. Consist√™ncia √© escolha.</div>
      </div>

      <div class="results" id="results">
        <div class="kpi">
          <div class="card">
            <div class="title">Seu patrim√¥nio em <span id="out_anos"></span> ano(s)</div>
            <div class="value" id="out_patrimonio">‚Äî</div>
            <div class="small" id="out_contexto">‚Äî</div>
          </div>

          <div class="card">
            <div class="title">Alcan√ßa o primeiro milh√£o em</div>
            <div class="value" id="out_milhao">‚Äî</div>
            <div class="small" id="out_milhao_detalhe">‚Äî</div>
          </div>

          <div class="card">
            <div class="title">Renda passiva mensal aproximada (0,5%)</div>
            <div class="value" id="out_renda">‚Äî</div>
            <div class="small">R√©gua simples (did√°tica): 0,5% do patrim√¥nio ao m√™s.</div>
          </div>
        </div>

        <div class="shareTip" id="shareTip">
          ‚úÖ Card gerado! Posta nos stories e marca <strong>@henri.wealthplanner</strong> ‚Äî eu vou repostar.
        </div>

        <div class="hr"></div>

        <div class="note">
          <strong>Disclaimer:</strong>
          este simulador <strong>n√£o considera imposto de renda</strong>, taxas, mudan√ßas de aloca√ß√£o,
          per√≠odos negativos, nem o <strong>crescimento real dos aportes</strong>.
          O objetivo √© educa√ß√£o financeira e uma vis√£o pr√°tica de ordem de grandeza ‚Äî pra voc√™ entender
          o n√≠vel de organiza√ß√£o e consist√™ncia necess√°rios pra construir a vida que quer, com mais clareza e menos improviso.
        </div>
      </div>

      <canvas id="cardCanvas" width="1080" height="1920"></canvas>
    </section>

    <!-- RIGHT -->
    <aside class="panel side">
      <div class="header">
        <div class="badge"><span class="dot"></span> Como usar</div>
        <h2 style="margin:14px 0 8px; font-size: 20px;">R√°pido e compartilh√°vel.</h2>
        <p class="sub" style="font-size: 14px;">
          Gere o relat√≥rio, clique em <strong>Compartilhar resultado</strong> e poste nos stories marcando
          <strong>@henri.wealthplanner</strong>.
        </p>
      </div>

      <div class="content">
        <div class="card" style="border-left:4px solid rgba(32,227,178,.6)">
          <div class="title">Dica</div>
          <div class="small">
            Melhor do que ‚Äúachar bonito‚Äù √© testar cen√°rios:
            aumente aporte, reduza prazo, mexa no retorno‚Ä¶ e veja o que muda.
          </div>
        </div>

        <div class="footer">
          Quer deixar com branding 100% do seu perfil? D√° pra transformar isso numa ‚Äús√©rie‚Äù de simuladores.
        </div>
      </div>
    </aside>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const brl = new Intl.NumberFormat('pt-BR', { style:'currency', currency:'BRL' });

    const STATE = { last: null };

    function clamp(n, min, max){ return Math.min(Math.max(n, min), max); }

    function formatDateBR(date){
      return date.toLocaleDateString('pt-BR', { year:'numeric', month:'long', day:'2-digit' });
    }

    function addMonths(date, months){
      const d = new Date(date.getTime());
      d.setMonth(d.getMonth() + months);
      return d;
    }

    // Taxa efetiva mensal a partir da anual efetiva
    function toMonthlyRate(annualPct){
      const a = annualPct / 100;
      return Math.pow(1 + a, 1/12) - 1;
    }

    function pvByInflation(fv, annualInflationPct, years){
      const i = annualInflationPct / 100;
      return fv / Math.pow(1 + i, years);
    }

    function readInputs(){
      const idade = Number($("idade").value);
      const anos = Number($("anos").value);
      const capital = Number($("capital").value);
      const aporte = Number($("aporte").value);
      const retorno = Number($("retorno").value);
      const inflacao = Number($("inflacao").value);

      return {
        idade: isFinite(idade) ? clamp(idade, 0, 120) : 0,
        anos: isFinite(anos) ? clamp(anos, 0, 80) : 0,
        capital: isFinite(capital) ? Math.max(0, capital) : 0,
        aporte: isFinite(aporte) ? Math.max(0, aporte) : 0,
        retorno: isFinite(retorno) ? Math.max(0, retorno) : 0,
        inflacao: isFinite(inflacao) ? Math.max(0, inflacao) : 0,
      };
    }

    // Simula m√™s a m√™s (pra patrim√¥nio final + tempo pro 1¬∫ milh√£o)
    function simulateTimeline({ years, initial, monthlyContribution, annualReturnPct, target=1_000_000 }){
      const months = Math.round(years * 12);
      const r = toMonthlyRate(annualReturnPct);

      let p = initial;
      let hitMonth = null;

      for(let m=0; m<=months; m++){
        if(hitMonth === null && p >= target) hitMonth = m;
        // aplica rendimento e aporte (exceto no m=months final depois da checagem)
        if(m < months) p = p * (1 + r) + monthlyContribution;
      }

      return { final: p, hitMonth };
    }

    function humanizeMonths(totalMonths){
      if(totalMonths === 0) return "Agora (j√° est√° acima)";
      const years = Math.floor(totalMonths / 12);
      const months = totalMonths % 12;
      if(years === 0) return `${months} m√™s(es)`;
      if(months === 0) return `${years} ano(s)`;
      return `${years} ano(s) e ${months} m√™s(es)`;
    }

    function render(){
      const { idade, anos, capital, aporte, retorno, inflacao } = readInputs();

      const timeline = simulateTimeline({
        years: anos,
        initial: capital,
        monthlyContribution: aporte,
        annualReturnPct: retorno,
        target: 1_000_000
      });

      const fv = timeline.final;
      const pv = pvByInflation(fv, inflacao, anos);

      const hoje = new Date();
      const futuro = addMonths(hoje, anos * 12);
      const idadeFutura = idade + anos;

      // milh√£o
      let milhaoTxt = "N√£o alcan√ßa";
      let milhaoDetalhe = "Com esses par√¢metros, o patrim√¥nio n√£o cruza R$ 1.000.000 no per√≠odo simulado.";
      if(timeline.hitMonth !== null){
        milhaoTxt = humanizeMonths(timeline.hitMonth);
        const dateM = addMonths(hoje, timeline.hitMonth);
        const idadeM = idade + Math.floor(timeline.hitMonth / 12);
        milhaoDetalhe = `Estimativa de data: ${formatDateBR(dateM)} (por volta de ${idadeM} anos).`;
      }

      const renda = fv * 0.005;

      $("out_anos").textContent = anos;
      $("out_patrimonio").textContent = brl.format(fv);
      $("out_contexto").innerHTML =
        `Na data <strong>${formatDateBR(futuro)}</strong>, voc√™ ter√° <strong>${idadeFutura} anos</strong>.<br/>` +
        `Em ‚Äúreais de hoje‚Äù (ajustado pela infla√ß√£o), isso equivale a <strong>${brl.format(pv)}</strong>.`;

      $("out_milhao").textContent = milhaoTxt;
      $("out_milhao_detalhe").textContent = milhaoDetalhe;
      $("out_renda").textContent = brl.format(renda);

      $("results").style.display = "block";
      $("share").disabled = false;
      $("shareTip").style.display = "none";

      STATE.last = {
        idade, anos, capital, aporte, retorno, inflacao,
        fv, pv, renda,
        futuro, idadeFutura,
        milhaoTxt, milhaoDetalhe,
        hoje
      };

      $("results").scrollIntoView({ behavior:"smooth", block:"start" });
    }

    function downloadBlob(blob, filename){
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    function drawMultiline(ctx, text, x, y, maxWidth, lineHeight){
      const words = String(text).split(" ");
      let line = "";
      let yy = y;

      for(const w of words){
        const test = line ? line + " " + w : w;
        if(ctx.measureText(test).width > maxWidth){
          ctx.fillText(line, x, yy);
          line = w;
          yy += lineHeight;
        } else {
          line = test;
        }
      }
      if(line) ctx.fillText(line, x, yy);
      return yy;
    }

    function buildShareCard(){
      const last = STATE.last;
      if(!last) return;

      const c = $("cardCanvas");
      const ctx = c.getContext("2d");

      // Safe areas para Stories (evita UI do Instagram)
      const SAFE_TOP = 160;
      const SAFE_BOTTOM = 240;
      const SAFE_SIDE = 80;

      // background
      const g = ctx.createLinearGradient(0,0,1080,1920);
      g.addColorStop(0, "#070A12");
      g.addColorStop(1, "#0B1630");
      ctx.fillStyle = g;
      ctx.fillRect(0,0,1080,1920);

      const rg1 = ctx.createRadialGradient(190,260,0,190,260,560);
      rg1.addColorStop(0, "rgba(124,92,255,.28)");
      rg1.addColorStop(1, "rgba(124,92,255,0)");
      ctx.fillStyle = rg1; ctx.fillRect(0,0,1080,1920);

      const rg2 = ctx.createRadialGradient(900,340,0,900,340,560);
      rg2.addColorStop(0, "rgba(32,227,178,.18)");
      rg2.addColorStop(1, "rgba(32,227,178,0)");
      ctx.fillStyle = rg2; ctx.fillRect(0,0,1080,1920);

      // helper: round rect
      function roundRect(x,y,w,h,r){
        const rr = Math.min(r, w/2, h/2);
        ctx.beginPath();
        ctx.moveTo(x+rr, y);
        ctx.arcTo(x+w, y, x+w, y+h, rr);
        ctx.arcTo(x+w, y+h, x, y+h, rr);
        ctx.arcTo(x, y+h, x, y, rr);
        ctx.arcTo(x, y, x+w, y, rr);
        ctx.closePath();
      }

      // main card box inside safe areas
      const cardX = SAFE_SIDE;
      const cardY = SAFE_TOP;
      const cardW = 1080 - SAFE_SIDE*2;
      const cardH = 1920 - SAFE_TOP - SAFE_BOTTOM;

      ctx.fillStyle = "rgba(255,255,255,.05)";
      ctx.strokeStyle = "rgba(255,255,255,.10)";
      ctx.lineWidth = 2;
      roundRect(cardX, cardY, cardW, cardH, 28);
      ctx.fill(); ctx.stroke();

      // Header
      ctx.fillStyle = "rgba(234,240,255,.95)";
      ctx.font = "900 54px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText("QUANTO VOC√ä PRECISA", cardX+50, cardY+120);
      ctx.fillText("PARA PARAR DE TRABALHAR?", cardX+50, cardY+182);

      ctx.fillStyle = "rgba(184,194,224,.95)";
      ctx.font = "500 28px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText(`Simula√ß√£o em ${last.anos} ano(s) ‚Ä¢ Retorno ${last.retorno}% a.a. ‚Ä¢ Infla√ß√£o ${last.inflacao}% a.a.`, cardX+50, cardY+235);

      // divider
      ctx.strokeStyle = "rgba(255,255,255,.12)";
      ctx.beginPath();
      ctx.moveTo(cardX+50, cardY+280);
      ctx.lineTo(cardX+cardW-50, cardY+280);
      ctx.stroke();

      // KPI blocks
      function kpiBlock(y, title, value, small){
        const bx = cardX+50;
        const by = y;
        const bw = cardW-100;
        const bh = 250;

        ctx.fillStyle = "rgba(255,255,255,.04)";
        ctx.strokeStyle = "rgba(255,255,255,.10)";
        roundRect(bx, by, bw, bh, 22);
        ctx.fill(); ctx.stroke();

        ctx.fillStyle = "rgba(184,194,224,.95)";
        ctx.font = "700 26px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText(title, bx+26, by+62);

        ctx.fillStyle = "rgba(234,240,255,.98)";
        ctx.font = "900 60px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        ctx.fillText(value, bx+26, by+140);

        ctx.fillStyle = "rgba(184,194,224,.92)";
        ctx.font = "500 24px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
        drawMultiline(ctx, small, bx+26, by+195, bw-52, 34);
      }

      const futuroTxt = `${formatDateBR(last.futuro)} ‚Ä¢ ${last.idadeFutura} anos`;
      kpiBlock(cardY+330, `Seu patrim√¥nio em ${last.anos} ano(s)`, brl.format(last.fv), `Nessa data: ${futuroTxt}. Em ‚Äúreais de hoje‚Äù: ${brl.format(last.pv)}.`);
      kpiBlock(cardY+620, "Primeiro milh√£o", last.milhaoTxt, last.milhaoDetalhe);
      kpiBlock(cardY+910, "Renda passiva mensal (0,5%)", brl.format(last.renda), "R√©gua simples (did√°tica): renda ‚âà 0,5% do patrim√¥nio ao m√™s.");

      // Footer CTA ‚Äî com MUITO respiro (safe bottom garantido)
      const footerY = cardY + cardH - 240;

      ctx.fillStyle = "rgba(234,240,255,.95)";
      ctx.font = "900 34px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText("Posta nos stories e marca:", cardX+50, footerY);

      ctx.fillStyle = "rgba(32,227,178,.95)";
      ctx.font = "900 48px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText("@henri.wealthplanner", cardX+50, footerY+70);

      ctx.fillStyle = "rgba(184,194,224,.90)";
      ctx.font = "500 22px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      ctx.fillText("Eu vou repostar üëä", cardX+50, footerY+112);

      ctx.fillStyle = "rgba(184,194,224,.78)";
      ctx.font = "500 18px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial";
      drawMultiline(
        ctx,
        "Disclaimer: n√£o considera IR, taxas, nem crescimento real dos aportes. Conte√∫do educativo.",
        cardX+50,
        footerY+150,
        cardW-100,
        28
      );

      c.toBlob((blob) => {
        if(!blob) return;
        downloadBlob(blob, `resultado_parar_de_trabalhar_${Date.now()}.png`);
        $("shareTip").style.display = "block";
        $("shareTip").scrollIntoView({ behavior:"smooth", block:"nearest" });
      }, "image/png");
    }

    $("btn").addEventListener("click", render);

    $("share").addEventListener("click", () => {
      if(!STATE.last) render();
      buildShareCard();
    });

    $("reset").addEventListener("click", () => {
      $("idade").value = 30;
      $("anos").value = 20;
      $("capital").value = 10000;
      $("aporte").value = 1000;
      $("retorno").value = 10;
      $("inflacao").value = 4.75;

      $("results").style.display = "none";
      $("share").disabled = true;
      $("shareTip").style.display = "none";
      STATE.last = null;
    });
  </script>
</body>
</html>
